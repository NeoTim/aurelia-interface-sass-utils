

$loader-list: () !default;
$loader-container: () !default;
$component-container: () !global;
$module-container: () !global;
/**
 *
 * loader-import
 * ==============
 *
 * @param  {String} $name Module name to be imported
 * @expose {Placeholer}   Expose module's placeholder on the current context
 */
@function loader-import($container: (), $name:'') {
    // $container: if($container == 'module', $module-container, $component-container);
    @return _get($container, $name);
}
@function loader-import-module($name) {
    @return loader-import($module-container, $name);
}
@function loader-import-component($name) {
    @return loader-import($component-container, $name);
}


/**
 *
 * loader-export
 * =============
 *
 * @param  {String} $module Module Defenition Type. {component|mixin|function|theme}
 * @param  {String} $name   Actual Module name
 * @param  {Map}    $map    Module mappings
 * @expose {Placeholder}    Expose the module placeholder.
 */
@mixin export-module($name:'', $map:()){

    $module-container: _set($module-container, $name, $map) !global;
}

/**
 * loader-export-component
 *
 * Make sure we don't load styles more than once on each component.
 * @param  {String} $name - component name
 */
@mixin loader-export-component($name:'') {

    @if not _get($component-container, $name) {
        @content;
    }
}

/**
 * loader-export-module
 *
 * Make sure we don't load modules more than once.
 *
 * @param  {String} $name - component name
 */
@mixin loader-export-module($name:'') {

    @if not loader-is--loaded($module-container, $name) {
        @content;
    }
}
/**
 *
 * loader-is--loaded
 * =================
 *
 * @description  Has the file been loaded yet? Should it reload?
 *
 * @param  {Map}     $map [arguments map]
 * @return {Map}     return loaded map instance
 */
@function loader-is--loaded($container:(), $name:'') {
    @return _has($container, $name);
}

/**
 *
 * loader-get--loaded
 * =================
 *
 * @description  Has the file been loaded yet? Should it reload?
 *
 * @param  {Map}     $map [arguments map]
 * @return {Map}     return loaded map instance
 */
@function loader-get--loaded($container:(), $name:'') {
    @return _get($container, $name);
}


/**
 *
 * Extend mixin
 *
 * Dealing with the extension for you
 *
 * @param  {String} $placeholder  - name of the placeholder to @extend
 * @param  {Bool} $extend: (true) - @extend or @include?
 */
@mixin module-extend($placeholder: '', $extend:true, $overwrite: true) {
    // Getting placeholder's content
    $content: map-get($module-container, $placeholder);

    // key exist? Do nothing and warn the user
    @if $content == null {
        @warn "`#{$placeholder}` doesn't exist in $module-container.";
    }

    // $extend? true (most cases) Extend the placeholder
    @else if $extend == true {
        @extend %#{$placeholder};
    }

    // $extend? Include placeholder's content directly
    @else {
        @include _rules($content);
    }
}
// Looping through the placeholders' map
// Instanciating a placeholder everytime
// With $extend set to false so it dumps
// mixin's core in the placeholder's content
@each $placeholder, $content in $module-container {
  %#{$placeholder} {
    @include ai-extend($placeholder, $extend: false);
  }
}
